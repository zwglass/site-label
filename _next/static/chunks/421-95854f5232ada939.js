"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{61:function(e,t,n){n.d(t,{k:function(){return Pt},Y:function(){return Lt}});var a=n(5893),r=n(7294),l=n(6536),i=function(e){var t=e.visible,n=(e.setVisible,e.visibleNumber),l=(0,r.useState)("invisible"),i=l[0],o=l[1];return(0,r.useEffect)((function(){o(t===n?"visible":"invisible")}),[t]),(0,a.jsxs)("div",{className:"fixed container justify-center bg-gray-200 rounded-md opacity-50 w-1/5 h-1/5 z-auto block mx-auto inset-1/3 p-1 ".concat(i),children:[(0,a.jsxs)("svg",{className:"icon animate-spin absolute container justify-center",width:"60px",height:"60px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M512 512m-426.666667 0a426.666667 426.666667 0 1 0 853.333334 0 426.666667 426.666667 0 1 0-853.333334 0Z",fill:"#959BA7",fillOpacity:".3"}),(0,a.jsx)("path",{d:"M938.666667 512c0-235.648-191.018667-426.666667-426.666667-426.666667v426.666667h426.666667z",fill:"#008CD1"}),(0,a.jsx)("path",{d:"M512 512m-320 0a320 320 0 1 0 640 0 320 320 0 1 0-640 0Z",fill:"#FFFFFF"})]}),(0,a.jsx)("p",{className:"absolute container justify-center left-1/3 bottom-0.5 text-sm",children:"Loading..."})]})};function o(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){s(e,t,n[t])}))}return e}i.defaultProps={visible:0,setVisible:function(e){return console.log(e)},visibleNumber:1};var u=[0,90,180,270],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transform?e.transform:"rotate(0deg)",n=parseInt(t.replace("rotate(","")),a=u.indexOf(n);return a=a<0?0:a},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;return 0===t&&0===n&&(t=o(1,a-2-e/3),n=o(1,r-4-e/3)),{position:"absolute",padding:0,margin:0,width:"min-content",height:"auto",marginLeft:"".concat(t,"mm"),marginTop:"".concat(n,"mm")}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:80,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,i=b(e,t,n,r,l);return{delYes:!1,urlValues:"http://localhost:8000/",qrcodeTips:"",qrcodeSize:e,qrcodeHeight:0,tipsFontSize:a,databaseText:"qrcode",styleQrCode:i,showQrcode:!1}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[2,50],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i="rotate(".concat(u[l],"deg)");return 0===t&&0===n&&(t=o(1,a-2-e[0]),n=o(1,r-4-e[1])),{position:"absolute",padding:0,margin:0,width:"min-content",height:"auto",marginLeft:"".concat(t,"mm"),marginTop:"".concat(n,"mm"),transformOrigin:"0% 0%",transform:i,MsTransform:i,MozTransform:i,WebkitTransform:i,OTransform:i}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,50],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;console.log(t,n);var i=c({},t,n),o=i.marginLeft&&parseInt(i.marginLeft)?parseInt(i.marginLeft):"",s=i.marginTop&&parseInt(i.marginTop)?parseInt(i.marginTop):"",u=d(i);return l>-1&&(u=l),f(e,o,s,a,r,u)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["urlValues","barcodeType","barcodeSize","style","showCode"],a=c({},e);for(var r in t)n.indexOf(r)>-1&&(a[r]=t[r]);return a},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,25],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:80,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,i=f(t,n,a,r,l);return{delYes:!1,urlValues:"123456",barcodeType:e,barcodeSize:t,databaseText:"barcode",style:i,showCode:!1}},g={labid:"",userid:"",labName:"",sphAndCylSign:0,labWidth:80,labHeight:50,printerName:"",unit:"mm",diameterSign:"\u03a6",lensDiameter:[],lensThickness:[],labInputs:[],labQRCode:p()};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){j(e,t,n[t])}))}return e}var y=new Date,O="".concat(y.getFullYear(),"-").concat(y.getMonth()+1,"-").concat(y.getDate()),S=[0,90,180,270],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"normal",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i="rotate(".concat(S[l],"deg)");return{position:"absolute",placeholder:"\u8bf7\u8f93\u5165\u6587\u672c",border:"0px solid grey",width:"".concat(e,"mm"),height:"auto",marginLeft:"".concat(t,"mm"),marginTop:"".concat(n,"mm"),fontSize:"".concat(a,"pt"),fontWeight:r,transformOrigin:"0% 0%",transform:i,MsTransform:i,MozTransform:i,WebkitTransform:i,OTransform:i}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.fontWeight?n.fontWeight:"normal",r=n.angleIndex?n.angleIndex:0,l=parseInt(n.width),i=parseInt(n.marginLeft),o=parseInt(n.marginTop),s=parseInt(n.fontSize);return{delYes:!0,inputValues:e,databaseText:t,style:w(l,i,o,s,a,r)}},I=function(e,t){var n=e.inputValues?e.inputValues:"",a=e.databaseText?e.databaseText:"",r=x({},e.style?e.style:{},t);if(-1===Object.keys(r).indexOf("angleIndex")){var l=parseInt(r.transform.replace("rotate(",""));r.angleIndex=S.indexOf(l)>-1?S.indexOf(l):0}return C(n,a,r)},N=[{delYes:!0,inputValues:"R",databaseText:"rOrL",style:w(8,2,0,13,"bold",0)},{delYes:!0,inputValues:"A:",databaseText:"",style:w(7,42,0,10,"bold",0)},{delYes:!0,inputValues:"0",databaseText:"axis",style:w(10,46,0,10,"bold",0)},{delYes:!0,inputValues:"ADD:",databaseText:"",style:w(12,56,0,10,"bold",0)},{delYes:!0,inputValues:"+1.50",databaseText:"add",style:w(14,65,0,10,"bold",0)}],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:26,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"normal",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return 6===t&&2===n&&(t=Math.ceil(10*Math.random()),n=Math.ceil(10*Math.random())),{delYes:!0,inputValues:"\u65b0\u5efa\u6587\u672c",databaseText:"",style:w(e,t,n,a,r,l)}},L=function(e){var t=e.labWidth,n=e.labHeight,a=e.unit;return{position:"relative",padding:0,width:"".concat(t).concat(a),height:"".concat(n).concat(a),border:"1px solid gray",borderRadius:"5px"}},P=function(e){return{top:e.getBoundingClientRect().top,left:e.getBoundingClientRect().left,bottom:e.getBoundingClientRect().bottom,right:e.getBoundingClientRect().right}},V=n(4988),k=n(402),E=function(e){var t=e.width,n=void 0===t?32:t,r=e.height,l=void 0===r?32:r,i=e.fill,o=void 0===i?"#F0F0F0":i;return(0,a.jsx)("svg",{t:"1630472526197",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",pId:"3757",width:n,height:l,children:(0,a.jsx)("path",{d:"M419.2 160v256h-256V160h256m0-64h-256c-35.2 0-64 28.8-64 64v256c0 35.2 28.8 64 64 64h256c35.2 0 64-28.8 64-64V160c0-35.2-28.8-64-64-64z m480 64v256h-256V160h256m0-64h-256c-35.2 0-64 28.8-64 64v256c0 35.2 28.8 64 64 64h256c35.2 0 64-28.8 64-64V160c0-35.2-28.8-64-64-64z m-480 512v256h-256V608h256m0-64h-256c-35.2 0-64 28.8-64 64v256c0 35.2 28.8 64 64 64h256c35.2 0 64-28.8 64-64V608c0-35.2-28.8-64-64-64z m192 352c-19.2 0-32-12.8-32-32V608c0-19.2 12.8-32 32-32s32 12.8 32 32v256c0 16-16 32-32 32z m156.8 0c-19.2 0-32-12.8-32-32V608c0-19.2 12.8-32 32-32s32 12.8 32 32v256c0 16-16 32-32 32z m163.2 0c-19.2 0-32-12.8-32-32V608c0-19.2 12.8-32 32-32s32 12.8 32 32v256c0 16-16 32-32 32z",fill:o,pId:"3758"})})},Z=function(e){var t=e.width,n=void 0===t?32:t,r=e.height,l=void 0===r?32:r,i=e.fill,o=void 0===i?"#F0F0F0":i;return(0,a.jsx)("svg",{t:"1630472728522",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7407",width:n,height:l,children:(0,a.jsx)("path",{fill:o,d:"M224 224h-64a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32V256a32 32 0 0 0-32-32zM352 224a32 32 0 0 0-32 32v512a32 32 0 0 0 64 0V256a32 32 0 0 0-32-32zM608 224h-128a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h128a32 32 0 0 0 32-32V256a32 32 0 0 0-32-32zM736 224a32 32 0 0 0-32 32v512a32 32 0 0 0 64 0V256a32 32 0 0 0-32-32zM864 224a32 32 0 0 0-32 32v512a32 32 0 0 0 64 0V256a32 32 0 0 0-32-32z",pId:"7408"})})};function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){F(e,t,n[t])}))}return e}var z=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.labelObjUpdateCount,i=e.setLabelObjUpdateCount,o=e.visible,s=e.setVisible,c=e.visibleNumber,u=e.editState,d=(0,r.useRef)(),b=(0,r.useState)({}),p=b[0],f=b[1],h=(0,r.useState)({}),m=h[0],v=h[1],g=(0,r.useState)(!1),j=(g[0],g[1]),x=(0,r.useState)("http://localhost:8000/"),y=x[0],O=x[1],S=(0,r.useState)(30),w=S[0],C=S[1],I=(0,r.useState)(80),N=I[0],T=I[1],L=(0,r.useState)(50),k=L[0],E=L[1],Z=(0,r.useState)(""),F=Z[0],z=Z[1],U=(0,r.useState)(8),Y=U[0],R=U[1],B=(0,r.useState)({top:20,left:280}),Q=B[0],A=B[1];(0,r.useEffect)((function(){console.log(t);var e=t.labQRCode?t.labQRCode:{},n=e.styleQrCode?D({},e.styleQrCode):{},a=!!e.showQrcode&&e.showQrcode,r=e.urlValues?e.urlValues:"http://localhost:8000/",l=e.qrcodeSize&&parseInt(e.qrcodeSize)?parseInt(e.qrcodeSize):"",i=e.qrcodeTips?e.qrcodeTips:"",o=e.tipsFontSize?e.tipsFontSize:8,s=t.labWidth?parseInt(t.labWidth):80,c=t.labHeight?parseInt(t.labHeight):50;n.display=a?"block":"none",T(s),E(c),R(o),f(e),v(n),j(a),O(r),C(l),z(i),console.log(a,r,n)}),[l]);var M=function(e){for(var a=Object.keys(e),r=["urlValues","qrcodeTips","styleQrCode","qrcodeSize","tipsFontSize","showQrcode"],o={},s=0;s<a.length;s++){var c=a[s];r.indexOf(c)>-1&&(e[c]?o[c]=e[c]:o[c]="")}var u=D({},p,o);f(u),n(D({},t,{labQRCode:u})),i(l+1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:m,ref:d,className:"p-0 m-0",children:[(0,a.jsx)(V.RG,{urlText:y,size:w,onClick:function(e){!function(){var e=P(d.current),t={top:e.bottom+10,left:e.right+10};A(t)}(),u&&s(c)}}),(0,a.jsx)("input",{className:"w-full h-auto",style:{fontSize:"".concat(Y,"pt")},defaultValue:F,onChange:function(e){return M({qrcodeTips:e.target.value})}})]}),(0,a.jsx)(_,{labelObj:t,setLabelObj:n,updateLabQRCode:M,labelObjUpdateCount:l,setLabelObjUpdateCount:i,qrcodeWidth:w,qrcodeEditDivLocation:Q,visible:o,setVisible:s,visibleNumber:c,labWidth:N,labHeight:k})]})};z.defaultProps={labelObj:{labQRCode:{}},setLabelObj:function(e){return console.log(e)},visible:0,setVisible:function(e){return console.log(e)},visibleNumber:4,editState:!1};var _=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.updateLabQRCode,i=e.labelObjUpdateCount,o=e.setLabelObjUpdateCount,s=e.qrcodeEditDivLocation,u=e.visible,d=e.setVisible,p=e.visibleNumber,f=e.labWidth,h=e.labHeight,m=(0,r.useState)({}),v=m[0],g=m[1],j=(0,r.useState)({}),x=j[0],y=j[1];(0,r.useEffect)((function(){var e=t.labQRCode?t.labQRCode:{};g(e),y(e.styleQrCode?e.styleQrCode:b())}),[i]);var O=function(e){var a={};for(var r in e)if(Object.hasOwnProperty.call(e,r)){var l=e[r];a[r]=l||""}var s=function(){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,n=c({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),a=0;if(n.width)try{a=parseInt(n.width)}catch(i){console.error(i),a=""}var r=n.marginLeft&&parseInt(n.marginLeft)?parseInt(n.marginLeft):"",l=n.marginTop&&parseInt(n.marginTop)?parseInt(n.marginTop):"";return b(a,r,l,e,t)}(x,a,f,h);y(s),n(D({},t,{labQRCode:D({},v,{styleQrCode:s})})),o(i+1)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(V.tU,{title:"\u4e8c\u7ef4\u7801\u7f16\u8f91",visible:u,setVisible:d,visibleNumber:p,divLocation:s,mbNumber:60,children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Url"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165url(\u4f8b\u5982: https://label.zwglass.net/)",value:v.urlValues?v.urlValues:"",className:"input input-primary input-xs input-bordered",onChange:function(e){return l({urlValues:e.target.value})}})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u4e8c\u7ef4\u7801\u5927\u5c0f"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:50)",value:v&&parseInt(v.qrcodeSize)?parseInt(v.qrcodeSize):"",className:"input input-primary input-xs input-bordered",onChange:function(e){return l({qrcodeSize:parseInt(e.target.value)})}})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u4e8c\u7ef4\u7801\u4f4d\u7f6eX"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:20)",value:x.marginLeft&&parseInt(x.marginLeft)?parseInt(x.marginLeft):"",className:"input input-primary input-xs input-bordered",onChange:function(e){return O({marginLeft:parseInt(e.target.value)})}}),(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u4e8c\u7ef4\u7801\u4f4d\u7f6eY"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:30)",defaultValue:x.marginTop&&parseInt(x.marginTop)?parseInt(x.marginTop):"",className:"input input-primary input-xs input-bordered",onChange:function(e){return O({marginTop:parseInt(e.target.value)})}})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u4e8c\u7ef4\u7801\u63d0\u793a"})}),(0,a.jsx)("input",{type:"text",placeholder:"Tips",defaultValue:v&&v.qrcodeTips?v.qrcodeTips:"",className:"input input-secondary input-xs input-bordered",onChange:function(e){return l({qrcodeTips:e.target.value})}}),(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u63d0\u793a\u6587\u5b57\u5927\u5c0f"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:9)",defaultValue:v.qrcodeTips?v.tipsFontSize:"",className:"input input-secondary input-xs input-bordered",onChange:function(e){return l({tipsFontSize:parseInt(e.target.value)})}})]})]})})})})},U=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.labelObjUpdateCount,i=e.setLabelObjUpdateCount,o=e.visible,s=e.setVisible,c=e.visibleNumber,u=e.editState,d=(0,r.useRef)(),b=(0,r.useState)({}),p=(b[0],b[1]),h=(0,r.useState)({}),m=h[0],g=h[1],j=(0,r.useState)({top:20,left:280}),x=j[0],y=j[1],O=(0,r.useState)(1),S=O[0],w=O[1],C=(0,r.useState)(30),I=C[0],N=C[1],T=(0,r.useState)(""),L=T[0],k=T[1],E=(0,r.useState)("zwglass.net"),Z=E[0],F=E[1];(0,r.useEffect)((function(){var e=t.labBarcode?t.labBarcode:v();console.log(e),p(e);var n=e.style?D({},e.style):f();n.display=e.showCode?"block":"none",g(n);var a=e.barcodeSize?e.barcodeSize:[1,30];w(a[0]),N(a[1]);var r=e.barcodeType?e.barcodeType:"",l=e.urlValues?e.urlValues:"zwglass.net";k(r),F(l)}),[l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:m,ref:d,className:"p-0 m-0",children:(0,a.jsx)(V.wY,{codeType:L,text:Z,width:S,height:I,onClick:function(e){!function(){var e=P(d.current),t={top:e.bottom+10,left:e.right+10};y(t)}(),u&&s(c)}})}),(0,a.jsx)(Y,{labelObj:t,setLabelObj:n,labelObjUpdateCount:l,setLabelObjUpdateCount:i,barcodeEditDivLocation:x,visible:o,setVisible:s,visibleNumber:c})]})},Y=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.labelObjUpdateCount,i=e.setLabelObjUpdateCount,o=e.barcodeEditDivLocation,s=e.visible,c=e.setVisible,u=e.visibleNumber,d=(0,r.useState)({}),b=d[0],p=d[1],g=(0,r.useState)({}),j=g[0],x=g[1],y=(0,r.useState)(80),O=y[0],S=y[1],w=(0,r.useState)(50),C=w[0],I=w[1],N=(0,r.useState)(1),T=N[0],L=N[1],P=(0,r.useState)(20),E=P[0],Z=P[1];(0,r.useEffect)((function(){var e=t.labBarcode?t.labBarcode:v();p(e),console.log(e.style),x(e.style?e.style:f());var n=e.barcodeSize?e.barcodeSize:[1,30];L(n[0]),Z(n[1]);var a=t.labWidth,r=t.labHeight;S(a),I(r)}),[l]);var F=function(e){var a=D({},t,{labBarcode:e});p(e),n(a),i(l+1)},z=function(e){console.log(e);var t=b.barcodeSize?b.barcodeSize:[2,30],n=h(t,j,e,O,C);console.log(n),x(n);var a=m(b,{style:n});F(a)},_=function(e){console.log(e);var t=m(b,e);F(t)},U=function(e){var t=["width","height"],n={width:T,height:E};for(var a in e)if(Object.hasOwnProperty.call(e,a)){var r=parseInt(e[a])?parseInt(e[a]):"";t.indexOf(a)>-1&&(n[a]=r)}var l=[n.width,n.height];_({barcodeSize:l}),S(n.width),I(n.height)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(V.tU,{title:"\u6761\u5f62\u7801\u7f16\u8f91",visible:s,setVisible:c,visibleNumber:u,divLocation:o,mbNumber:60,children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsxs)("select",{className:"select select-bordered select-xs w-full max-w-xs",onChange:function(e){return _({barcodeType:e.target.value})},children:[(0,a.jsx)("option",{disabled:"disabled",selected:"selected",value:"",children:"\u6761\u7801\u7c7b\u578b"}),k.dY.map((function(e){return(0,a.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u6761\u7801\u7f16\u53f7"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u6761\u7801\u7f16\u53f7(\u4f8b\u5982: 123456)",defaultValue:b.urlValues?b.urlValues:"",className:"input input-primary input-xs input-bordered",onChange:function(e){return _({urlValues:e.target.value})}})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u6761\u7801\u5bbd\u5ea6(\u4e00\u6839\u7ad6\u6761\u7684\u5bbd\u5ea6)"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:2)",defaultValue:T,className:"input input-primary input-xs input-bordered",onChange:function(e){return U({width:e.target.value})}})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u6761\u7801\u9ad8\u5ea6"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:2)",defaultValue:E,className:"input input-primary input-xs input-bordered",onChange:function(e){return U({height:e.target.value})}})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u6761\u7801\u4f4d\u7f6eX"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:20)",defaultValue:j.marginLeft&&parseInt(j.marginLeft)?parseInt(j.marginLeft):"",className:"input input-primary input-xs input-bordered",onChange:function(e){return z({marginLeft:parseInt(e.target.value)})}}),(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"\u6761\u7801\u4f4d\u7f6eY"})}),(0,a.jsx)("input",{type:"text",placeholder:"\u8f93\u5165\u6570\u5b57(\u6bd4\u5982:30)",defaultValue:j.marginTop&&parseInt(j.marginTop)?parseInt(j.marginTop):"",className:"input input-primary input-xs input-bordered",onChange:function(e){return z({marginTop:parseInt(e.target.value)})}})]})]})})})})};function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){R(e,t,n[t])}))}return e}var Q=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.labelObjUpdateCount,i=e.setLabelObjUpdateCount,o=e.visible,s=e.setVisible,c=e.visibleNumberQrcode,u=e.visibleNumberBarcode,d=e.updateSelectedInputObjIndex,b=e.updateInputObjVal,p=e.editState,f=e.setVisibleInputEditDiv,h=e.setInputEditDivLocation,m=(0,r.useState)([]),v=m[0],g=m[1];(0,r.useEffect)((function(){var e=[].concat(t.labInputs?t.labInputs:[]);console.log(t),g(e)}),[l]);var j=function(e){d(e);var t=function(e){var t=null;document&&(t=document.getElementById("labelTextInputs-".concat(e))),console.log(t);var n={};t&&(n=P(t));var a=n.bottom?n.bottom+10:120,r=n.right?n.right+10:260;return console.log(a,r),{top:a,left:r}}(e);console.log(t),h(t),console.log(p),p&&(console.log(t),f(2))};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{style:L(t),children:[v.map((function(e,t){return(0,a.jsx)("input",{id:"labelTextInputs-".concat(t),value:"object"!==typeof e?"":e.inputValues,style:"object"!==typeof e?{backgroundColor:"transparent"}:B({},e.style,{backgroundColor:"transparent"}),onFocus:function(){return j(t)},onChange:function(e){return b(t,e.target.value)}},t.toString())})),(0,a.jsx)(z,{labelObj:t,setLabelObj:n,labelObjUpdateCount:l,setLabelObjUpdateCount:i,visible:o,setVisible:s,visibleNumber:c,editState:p}),(0,a.jsx)(U,{labelObj:t,setLabelObj:n,labelObjUpdateCount:l,setLabelObjUpdateCount:i,visible:o,visibleNumber:u,setVisible:s,editState:p})]})})};Q.defaultProps={labelObj:{},setLabelObj:function(e){return console.log(e)},labelObjUpdateCount:0,setLabelObjUpdateCount:function(e){return console.log(e)},updateSelectedInputObjIndex:function(e){return console.log(e)},updateInputObjVal:function(e){return console.log(e)},editState:1,setVisibleInputEditDiv:function(e){return console.log(e)},setInputEditDivLocation:function(e){return console.log(e)}};var A=Q,M=n(991),H=n(2742),W=n(4268),q=n(1669),G=n(4594),X=n(6713),K=n(6790),J=n(1577),$=n(1484),ee=n(8165);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){te(e,t,n[t])}))}return e}M.Z.confirm;var ae=C("noneInputSelected","",{}),re=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.selectedInputObjIndex,i=e.updateInputObjVal,o=e.setEditVisible,s=e.labelObjUpdateCount,c=e.setLabelObjUpdateCount,u=(0,r.useState)(ne({},ae)),d=u[0],b=u[1],p=(0,r.useState)(0),f=p[0],h=p[1],m=function(){var e=0;"undefined"!==typeof t.labInputs&&(e=t.labInputs.length),b(ne({},e>l&&l>-1?t.labInputs[l]:ae))};(0,r.useEffect)((function(){m()}),[l,t]);var v=function(e){console.log(e);i("fontWeight",["normal","bold"][e?1:0])},g={margin:"0 5px"},j=function(){return"noneInputSelected"===d.inputValues?null:(0,a.jsx)(H.Z,{title:"\u6587\u672c\u6846\u5c5e\u6027: ".concat(d.inputValues),extra:(0,a.jsx)("a",{href:"#",children:"More"}),style:{width:320},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",overflow:"auto"},children:(0,a.jsxs)(W.Z,{labelCol:{span:8},wrapperCol:{span:16},children:[(0,a.jsx)(W.Z.Item,{label:"\u5b57\u4f53\u5927\u5c0f",children:(0,a.jsx)(q.Z,{value:parseInt(d.style.fontSize),onChange:function(e){return i("fontSize",e)}})}),(0,a.jsx)(W.Z.Item,{label:"\u5b57\u4f53\u52a0\u7c97",children:(0,a.jsx)(G.Z,{checked:"bold"===d.style.fontWeight,onChange:v})}),(0,a.jsx)(W.Z.Item,{label:"\u6587\u672c\u6846\u5bbd\u5ea6",children:(0,a.jsx)(q.Z,{value:parseInt(d.style.width),onChange:function(e){return i("width",e)}})}),(0,a.jsx)(W.Z.Item,{label:"\u6587\u672c\u6846\u4f4d\u7f6eX:",style:{marginBottom:0},children:(0,a.jsxs)(X.Z,{children:[(0,a.jsx)(q.Z,{style:{width:80},min:-100,max:1e3,value:parseInt(d.style.marginLeft),onChange:function(e){return i("marginLeft",e)}}),"Y:",(0,a.jsx)(q.Z,{style:{width:80},min:-100,max:1e3,value:parseInt(d.style.marginTop),onChange:function(e){return i("marginTop",e)}})]})})]})})})};return(0,a.jsxs)("div",{className:"bg-gray-200 bg-opacity-100",children:[(0,a.jsx)(K.Z,{title:"\u5220\u9664\u5f53\u524d\u6587\u672c\u6846",children:(0,a.jsx)(J.Z,{onClick:function(){return h(1)},style:g,type:"default",shape:"circle",icon:(0,a.jsx)($.Z,{})})}),(0,a.jsx)(K.Z,{title:"\u65cb\u8f6c\u6587\u672c\u6846",children:(0,a.jsx)(J.Z,{onClick:function(){var e=parseInt(d.style.transform.replace("rotate(","")),a=[0,90,180,270].indexOf(e);a=(a=a<0?0:a+1)>3?0:a,console.log(e,a);var r=I(d,{angleIndex:a});console.log(r);var i=ne({},t);i.labInputs.splice(l,1,r),console.log(i),n(i),c(s+1)},style:g,type:"default",shape:"circle",icon:(0,a.jsx)(ee.Z,{})})}),(0,a.jsx)("hr",{}),(0,a.jsx)(j,{}),(0,a.jsxs)(V.Dx,{title:"\u5220\u9664\u6807\u7b7e\u6587\u672c",visible:f,setVisible:h,visibleNumber:1,children:[(0,a.jsx)("div",{className:"alert alert-warning",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("label",{children:"\u5220\u9664\u6807\u7b7e\u6587\u672c\u540e\u65e0\u6cd5\u6062\u590d!"})]})}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("a",{className:"btn btn-primary btn-sm",onClick:function(){var e=ne({},t);e.labInputs.splice(l,1),n(e),c(s+1),m(),h(0),o(0)},children:"\u786e\u5b9a"}),(0,a.jsx)("a",{className:"btn btn-sm",onClick:function(){return h(0)},children:"\u53d6\u6d88"})]})]})]})},le=n(8939),ie=n(4895),oe=n(5591),se=n(1554),ce=n(592),ue=n(1313),de=n(8969),be=n(4051),pe=n.n(be);var fe=function(e){var t=e||"0";return t=t.replace("rotate(",""),-(t=parseInt(t)?parseInt(t):0)},he=function(e,t){var n=t.style,a=fe(n.transform),r=parseInt(n.fontSize)?parseInt(n.fontSize):9,l=n,i=0;if(n.fontWeight){i=["bold","bolder"].indexOf(n.fontWeight)>-1?1:0}e.SET_PRINT_STYLE("Angle",a),e.SET_PRINT_STYLE("FontSize",r),e.SET_PRINT_STYLE("FontName",l),e.SET_PRINT_STYLE("Bold",i)},me=function(e,t,n){if(t.showQrcode){var a=t.styleQrCode,r=a.marginTop,l=a.marginLeft,i=t.qrcodeSize+"px",o=t.qrcodeSize+"px";"QRCode"!==n&&t.qrcodeHeight&&(o=t.qrcodeHeight+"px");var s=t.urlValues;e.SET_PRINT_STYLEA(0,"QRCodeVersion",1),e.ADD_PRINT_BARCODE(r,l,i,o,n,s)}},ve=function(e,t){if(console.log(t),t.showCode){var n=t.style,a=n.marginTop,r=n.marginLeft,l=t.barcodeSize;console.log(l);var i=l[0],o=l[1]+"px",s=function(e){for(var t=0;t<k.dY.length;t++){var n=k.dY[t];if(n.value===e)return n.lodopType}return"128Auto"}(t.barcodeType),c=t.urlValues,u=c.toString().length*i;console.log(a,r,u,o,s,c),function(e,t){var n=t.style,a=fe(n.transform);e.SET_PRINT_STYLE("Angle",a),e.SET_PRINT_STYLE("FontSize",9),e.SET_PRINT_STYLE("Bold",0)}(e,t),e.ADD_PRINT_BARCODE(a,r,u,o,s,c)}},ge=function(e,t){var n=t.inputValues?t.inputValues:"",a=t.style?t.style:{},r=a.marginTop?a.marginTop:"2mm",l=a.marginLeft?a.marginLeft:"5mm",i=parseInt(a.width)?parseInt(1.2*parseInt(a.width))+"mm":"RightMargin",o=parseInt(a.fontSize)?parseInt(.36*parseInt(a.fontSize))+"mm":"BottomMargin";e.ADD_PRINT_TEXT(r,l,i,o,n)},je=function(e,t){var n=t.labWidth?t.labWidth+"mm":"80mm",a=t.labHeight?parseInt(t.labHeight)-2+"mm":"48mm";e.SET_PRINT_PAGESIZE(1,n,a,"CreateCustomPage")},xe=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=t.labInputs,i=t.labQRCode?t.labQRCode:p(),o=t.labBarcode?t.labBarcode:v();if(!e)return console.log("\u6253\u5370\u673a\u672a\u8fde\u63a5...",a,r),void alert("\u6253\u5370\u673a\u672a\u8fde\u63a5...");e.PRINT_INIT(""),je(e,t);for(var s=0;s<l.length;s++){var c=l[s];he(e,c),ge(e,c)}me(e,i,"QRCode"),ve(e,o),e.SET_PRINTER_INDEX(n),e.SET_PRINT_COPIES(parseInt(r)),1===a?e.PREVIEW():e.PRINT()},ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=(0,de.Z)();xe(l,t,e,n,a),r&&M.Z.info({content:"\u6253\u5370\u5b8c\u6210!"})};function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Oe(e,t,n[t])}))}return e}var we=le.Z.Option,Ce=function(e){var t=e.showVisibleNum,n=e.visible,l=e.setVisible,i=e.setLabelObj,o=e.labelObjUpdateCount,s=e.setLabelObjUpdateCount,c=(0,r.useState)({multipleFocuseLens:!1,goodsName:"1.56\u8d85\u8584\u6811\u8102\u9632\u84dd\u5149",ne:1.553,vd:37,diameter:72}),u=c[0],d=c[1],b=function(e,t){var n;console.log((n=t)&&"undefined"!==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n);var a=Se({},u),r=t;if("object"===typeof t)try{t.target.hasOwnProperty("value")?r=t.target.value:t.target.hasOwnProperty("checked")&&(r=t.target.checked)}catch(l){console.log(l)}a[e]=r,d(a),console.log(a)};return(0,a.jsx)(M.Z,{title:"\u955c\u7247\u6807\u7b7e\u521b\u5efa",visible:t===n,onOk:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.goodsName?e.goodsName:"1.56\u8d85\u8584\u975e\u7403\u9762",a=e.ne?"n(e)="+e.ne:"n(e)=1.553",r=e.vd?"Vd="+e.vd:"Vd=37",l=e.diameter?e.diameter+"mm":"72mm",i=[{delYes:!1,inputValues:"S:",databaseText:"",style:w(8,9,0,10,"bold",0)},{delYes:!1,inputValues:"-0.00",databaseText:"sph",style:w(14,13,0,10,"bold",0)},{delYes:!1,inputValues:"C:",databaseText:"",style:w(8,26,0,10,"bold",0)},{delYes:!1,inputValues:"-0.00",databaseText:"cyl",style:w(14,30,0,10,"bold",0)},{delYes:!0,inputValues:"\u54c1\u540d:",databaseText:"",style:w(10,6,5,9,"bold",0)},{delYes:!0,inputValues:n,databaseText:"title",style:w(60,15,5,9,"bold",0)},{delYes:!0,inputValues:"\u4ea7\u54c1\u5206\u7c7b:",databaseText:"",style:w(18,42,9,8,"normal",0)},{delYes:!0,inputValues:"\u773c\u955c\u7c7b",databaseText:"",style:w(20,58,9,8,"normal",0)},{delYes:!0,inputValues:"\u4ea7\u54c1\u7528\u9014:",databaseText:"",style:w(18,42,13,8,"normal",0)},{delYes:!0,inputValues:"\u89c6\u529b\u77eb\u6b63\u7528",databaseText:"",style:w(20,58,13,8,"normal",0)},{delYes:!0,inputValues:"\u9540\u819c\u60c5\u51b5:",databaseText:"",style:w(18,42,17,8,"normal",0)},{delYes:!0,inputValues:"\u591a\u5c42\u590d\u5408\u819c",databaseText:"",style:w(20,58,17,8,"normal",0)},{delYes:!0,inputValues:"\u819c\u8272:",databaseText:"",style:w(9,42,21,8,"normal",0)},{delYes:!0,inputValues:"\u7eff\u819c",databaseText:"",style:w(10,50,21,8,"normal",0)},{delYes:!0,inputValues:"\u8bbe\u8ba1:",databaseText:"",style:w(9,58,21,8,"normal",0)},{delYes:!0,inputValues:"\u975e\u7403\u9762",databaseText:"",style:w(10,66,21,8,"normal",0)},{delYes:!0,inputValues:"\u4ea7\u5730:",databaseText:"",style:w(9,42,25,8,"normal",0)},{delYes:!0,inputValues:"\u4e2d\u56fd \u4e39\u9633",databaseText:"",style:w(18,50,25,8,"normal",0)},{delYes:!0,inputValues:"\u7b49\u7ea7:",databaseText:"",style:w(8,42,29,8,"normal",0)},{delYes:!0,inputValues:"\u5408\u683c",databaseText:"",style:w(8,50,29,8,"normal",0)},{delYes:!0,inputValues:"\u6298\u5c04\u7387:",databaseText:"",style:w(14,6,9,8,"normal",0)},{delYes:!0,inputValues:a,databaseText:"",style:w(18,20,9,8,"normal",0)},{delYes:!0,inputValues:"\u900f\u5c04\u6bd4:",databaseText:"",style:w(14,6,13,8,"normal",0)},{delYes:!0,inputValues:"0\u7c7b\u3001UV-1",databaseText:"",style:w(18,20,13,8,"normal",0)},{delYes:!0,inputValues:"\u963f\u8d1d\u6570:",databaseText:"",style:w(14,6,17,8,"normal",0)},{delYes:!0,inputValues:r,databaseText:"",style:w(18,20,17,8,"normal",0)},{delYes:!0,inputValues:"\u4e2d\u5fc3\u539a\u5ea6:",databaseText:"",style:w(18,6,21,8,"normal",0)},{delYes:!0,inputValues:"1.2mm",databaseText:"thickness",style:w(18,20,21,8,"normal",0)},{delYes:!0,inputValues:"\u76f4\u5f84:",databaseText:"",style:w(14,6,25,8,"normal",0)},{delYes:!0,inputValues:l,databaseText:"diameter",style:w(18,20,25,8,"normal",0)},{delYes:!0,inputValues:"\u751f\u4ea7\u65e5\u671f:",databaseText:"",style:w(14,6,29,8,"normal",0)},{delYes:!0,inputValues:O,databaseText:"madeDay",style:w(18,20,29,8,"normal",0)},{delYes:!0,inputValues:"\u6267\u884c\u6807\u51c6:",databaseText:"",style:w(14,6,33,8,"normal",0)},{delYes:!0,inputValues:"QB/T2506-2017",databaseText:"",style:w(28,20,33,8,"normal",0)},{delYes:!0,inputValues:"GB10810.1-2005",databaseText:"",style:w(28,4,37,8,"normal",0)},{delYes:!0,inputValues:"GB10810.3-2006",databaseText:"",style:w(28,4,40,8,"normal",0)},{delYes:!0,inputValues:"GB10810.5-2012",databaseText:"",style:w(28,4,43,8,"normal",0)}],o=x({},g);o.labWidth=80,o.labHeight=50;for(var s=t?i.concat(N):[].concat(i),c=0;c<s.length;c+=1)s[c].indexNum=c;o.labInputs=[].concat(s),o.labQRCode=p(60,58,30,9,o.labWidth,o.labHeight);var u=v("",[1,30],45,35,o.labWidth,o.labHeight);return console.log(u),o.labBarcode=u,o}(u,u.multipleFocuseLens);i(e),setTimeout((function(){s(o+1)}),1e3),l(0)},onCancel:function(){return l(0)},children:(0,a.jsxs)(W.Z,Se({},k.XK.formLayoutStyle,{name:"\u65b0\u5efa\u955c\u7247\u6807\u7b7e",initialValues:u,children:[(0,a.jsx)(W.Z.Item,{label:"\u591a\u7126\u955c\u7247",name:"multipleFocuseLens",valuePropName:"checked",children:(0,a.jsx)(G.Z,{onChange:function(e){return b("multipleFocuseLens",e)}})}),(0,a.jsx)(W.Z.Item,{label:"\u6298\u5c04\u7387",name:"ne",children:(0,a.jsx)(le.Z,{style:{width:120},onChange:function(e){return b("ne",e)},children:[1.5,1.553,1.601,1.665,1.701,1.737].map((function(e,t){return(0,a.jsx)(we,{value:e,children:e},"createLabelObj"+t)}))})}),(0,a.jsx)(W.Z.Item,{label:"\u963f\u8d1d\u6570",name:"vd",children:(0,a.jsx)(q.Z,{onChange:function(e){return b("vd",e)}})}),(0,a.jsx)(W.Z.Item,{label:"\u76f4\u5f84",name:"diameter",children:(0,a.jsx)(q.Z,{onChange:function(e){return b("diameter",e)}})}),(0,a.jsx)(W.Z.Item,{label:"\u54c1\u540d",name:"goodsName",children:(0,a.jsx)(ie.Z,{onChange:function(e){return b("goodsName",e)}})})]}))})};Ce.defaultProps={showVisibleNum:1,visible:!1,setVisible:function(e){return console.log(e)},setLabelObj:function(e){return console.log(e)},labelObjUpdateCount:0,setLabelObjUpdateCount:function(e){return console.log(e)}};var Ie=n(4580),Ne=n(9488),Te=n(7218);function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=[Ne.Q.labelTemplatesGet,Ne.Q.labelTemplatePost,Ne.Q.labelTemplatePut,Ne.Q.labelTemplateDelete],Ve=function(e){for(var t="",n=[].concat(e.labInputs),a=0;a<n.length;a++){var r=n[a];if(r.databaseText&&"title"===r.databaseText){t=r.inputValues;break}}return t},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a={label_title:Ve(e),product_categray:t,is_lens:n,label_obj:e};return console.log(a),a},Ee=function(e,t){return new Promise((function(n,a){var r=Pe[0].api,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Le(e,t,n[t])}))}return e}({},t,{page:e});(0,Te.H)(r,"get",l,{}).then((function(e){n(e)})).catch((function(e){a(e)}))}))};function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=ie.Z.Search,De=function(e,t,n,r,i){var o=function(t){var a;(a=t,new Promise((function(e,t){var n=Pe[0].api+"/"+a;(0,Te.H)(n,"get",{},{}).then((function(t){e(t)})).catch((function(e){t(e)}))}))).then((function(t){if(t.label_object){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Ze(e,t,n[t])}))}return e}({},t.label_object,{labid:t.id?t.id:0});n(a),e(0)}else l.ZP.error("\u6807\u7b7e\u9519\u8bef..."),n({})})).catch((function(e){console.log(e),l.ZP.error("\u6807\u7b7e\u9519\u8bef, \u8bf7\u5220\u9664\u91cd\u65b0\u521b\u5efa...")}))},s=function(e,t,n){console.log(e,t,n);var a,o=t.currentLabel;o&&o.id&&(a=o.id,new Promise((function(e,t){var n=Pe[3].api+"/"+a;(0,Te.H)(n,"delete",{},{}).then((function(t){e(t)})).catch((function(e){t(e)}))}))).then((function(e){l.ZP.success("\u5df2\u6210\u529f\u5220\u9664\u6807\u7b7e "+o.label_title);var t=[].concat(r);t.splice(n,1),i(t)})).catch((function(e){console.log(e),l.ZP.error("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc")}))};return[{title:"\u6807\u7b7e\u540d\u79f0",dataIndex:"labelTitle",key:"labelTitle",width:160,editable:!1},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:160,render:function(e,t,n){return(0,a.jsxs)(X.Z,{size:"middle",children:[(0,a.jsx)(J.Z,{type:"link",onClick:function(){return function(e,t,n){console.log(e,t,n);var a=t.currentLabel;console.log(a),a&&a.id?o(a.id):l.ZP.error("\u5f53\u524d\u6807\u7b7e\u6709\u9519\u8bef\uff0c\u8bf7\u5220\u9664\u91cd\u65b0\u521b\u5efa...")}(e,t,n)},children:"\u9009\u62e9"}),(0,a.jsx)(J.Z,{type:"link",onClick:function(){return s(e,t,n)},children:"\u5220\u9664"})]})}}]},ze=function(e,t){return{key:t.toString(),labelTitle:e.label_title,id:e.id,currentLabel:e}},_e=function(e){var t=e.visible,n=e.setVisible,l=e.showVisibleNum,i=(e.selectedLabel,e.setSelectedLabel),o=e.commonOrLensLabel,s=(0,r.useState)(1),c=s[0],u=s[1],d=(0,r.useState)([]),b=d[0],p=d[1],f=(0,r.useState)({}),h=f[0],m=f[1],v=(0,r.useState)(!1),g=v[0],j=v[1],x=(0,r.useState)(""),y=x[0],O=x[1],S=(0,r.useState)(0),w=S[0],C=S[1],I=function(){j(!0),Ee(c,h).then((function(e){console.log(e),C(e.count?e.count:0);var t=function(e){for(var t=[],n=e.results,a=0;a<n.length;a++){var r=n[a];t.push(ze(r,a))}return t}(e);console.log(t),p(t),j(!1)})).catch((function(e){console.error(e),p([]),j(!1)}))};(0,r.useEffect)((function(){1===c?(p([]),I()):u(1)}),[h]),(0,r.useEffect)((function(){p([]),I()}),[c]),(0,r.useEffect)((function(){t>0&&(O(""),m({label_title:"",is_lens:o}))}),[t]);return(0,a.jsx)(M.Z,{title:"\u955c\u7247\u6807\u7b7e\u521b\u5efa",visible:l===t,onCancel:function(){return n(0)},children:(0,a.jsxs)(X.Z,{direction:"vertical",children:[(0,a.jsx)(Fe,{placeholder:"input search text",value:y,onChange:function(e){O(e.target.value)},onSearch:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u(1),m({label_title:e,is_lens:o})}(e)},enterButton:!0,loading:g}),(0,a.jsx)(Ie.Z,{columns:De(n,0,i,b,p),dataSource:b,pagination:{onChange:function(e,t){console.log(e),u(e)},total:w,pageSize:10}})]})})};_e.defaultProps={visible:0,setVisible:function(e){return console.log(e)},showVisibleNum:1,selectedLabel:{},setSelectedLabel:function(e){return console.log(e)},commonOrLensLabel:0,selectedLabelID:0,setSelectedLabelID:function(e){return console.log(e)}};var Ue=le.Z.Option,Ye=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.labelObjUpdateCount,i=e.setLabelObjUpdateCount,o=e.commonOrLensLabel,s=e.selectedPrinterIndex,c=e.saveOrUpdatelabel,u=(0,r.useState)(0),d=u[0],b=u[1],f=(0,r.useState)(1),h=f[0],m=f[1],j=(0,r.useState)(2),y=j[0],O=j[1],S={margin:"5px"};return(0,a.jsxs)("div",{children:[(0,a.jsx)(J.Z,{style:S,shape:"round",icon:(0,a.jsx)(oe.Z,{}),size:"middle",onClick:function(){return b(2)},children:"\u9009\u62e9\u6807\u7b7e"}),(0,a.jsx)(J.Z,{style:S,shape:"round",icon:(0,a.jsx)(se.Z,{}),size:"middle",onClick:function(){if(0===o){var e=function(){var e=x({},g);e.labInputs=[],e.labWidth=75,e.labHeight=25;var t=C("\u6807\u7b7e\u540d\u79f0","title",{marginLeft:4,marginTop:19,angleIndex:3,width:28,fontSize:10});return t.indexNum=e.labInputs.length,e.labInputs.push(t),(t=C("\xa5188","",{marginLeft:22,marginTop:7,angleIndex:1,width:20,fontSize:10})).indexNum=e.labInputs.length,e.labInputs.push(t),e.labQRCode=p(60,28,5,9,e.labWidth,e.labHeight),e.labBarcode=v("",[2,30],30,5,e.labWidth,e.labHeight),e}();console.log(e),n(e),setTimeout((function(){i(l+1)}),1e3)}else b(1)},children:"\u65b0\u5efa\u6807\u7b7e"}),(0,a.jsx)(J.Z,{style:S,shape:"round",icon:(0,a.jsx)(ce.Z,{}),size:"middle",onClick:c,children:"\u4fdd\u5b58\u6807\u7b7e"}),(0,a.jsx)("div",{className:"divider",children:"LabelPrint"}),(0,a.jsx)("br",{}),(0,a.jsxs)(W.Z,{layout:"inline",children:[(0,a.jsx)(W.Z.Item,{label:"\u6253\u5370\u4efd\u6570",children:(0,a.jsx)(ie.Z,{type:"number",defaultValue:h,onChange:function(e){return m(parseInt(e.target.value)?parseInt(e.target.value):1)},style:{width:100}})}),(0,a.jsx)(W.Z.Item,{children:(0,a.jsxs)(le.Z,{defaultValue:2,onChange:function(e){return O(e)},bordered:!1,children:[(0,a.jsx)(Ue,{value:2,children:"\u76f4\u63a5\u6253\u5370"}),(0,a.jsx)(Ue,{value:1,children:"\u6253\u5370\u9884\u89c8"})]})}),(0,a.jsx)(W.Z.Item,{children:(0,a.jsx)(J.Z,{icon:(0,a.jsx)(ue.Z,{}),size:"middle",onClick:function(){ye(s,t,y,h,!0)},type:"ghost",children:"\u6253\u5370"})})]}),(0,a.jsx)(Ce,{showVisibleNum:1,visible:d,setVisible:b,setLabelObj:n,labelObjUpdateCount:l,setLabelObjUpdateCount:i}),(0,a.jsx)(_e,{visible:d,setVisible:b,showVisibleNum:2,selectedLabel:t,setSelectedLabel:function(e){n(e),setTimeout((function(){i(l+1)}),500)},commonOrLensLabel:o})]})};function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=function(e){var t=e.labelObj,n=e.updateLabelObj,l=(0,r.useState)(0),i=l[0],o=l[1],s=(0,r.useState)(0),c=s[0],u=s[1];(0,r.useEffect)((function(){o(t.labWidth),u(t.labHeight)}),[t.labWidth,t.labHeight]);var d=function(e,a){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Re(e,t,n[t])}))}return e}({},t);r[e]=a,n(r)};return(0,a.jsx)("div",{children:(0,a.jsxs)(W.Z,{children:[(0,a.jsx)(W.Z.Item,{label:"\u6807\u7b7e\u5bbd",children:(0,a.jsx)(q.Z,{value:i,onChange:function(e){return d("labWidth",e)}})}),(0,a.jsx)(W.Z.Item,{label:"\u6807\u7b7e\u9ad8",children:(0,a.jsx)(q.Z,{value:c,onChange:function(e){return d("labHeight",e)}})})]})})},Qe=n(3134),Ae=n(1382);function Me(e,t,n,a,r,l,i){try{var o=e[l](i),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(a,r)}function He(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function i(e){Me(l,a,r,i,o,"next",e)}function o(e){Me(l,a,r,i,o,"throw",e)}i(void 0)}))}}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){We(e,t,n[t])}))}return e}var Ge=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},Xe={title:"",dataIndex:"",width:100,inputType:"inputNumber"},Ke=function(e){for(var t=[],n=0;n<=e;n+=25){var a=(n/100).toFixed(2).toString();t.push(a)}return t},Je=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600,a=Ke(n),r={key:t+1,sph:e[t]},l=0;l<a.length;l+=1){var i=a[l],o=(100*Number(i)).toString();r[o]=""}return new Promise((function(e,t){"object"===typeof r?e(r):(console.log("Error code...",Ge(current)),t({}))}))},$e=function(e,t,n){return new Promise((function(a,r){var l=e.thicknessDiameter?e.thicknessDiameter:[];console.log(l);for(var i=0,o=0;o<l.length;o++){var s=l[o];if(Math.abs(parseFloat(s.sph))===Math.abs(parseFloat(t))){i+=1;var c=n.replace(/lens/,"").toLowerCase();return void a(s[c]?s[c]:"thickness"===c?"1.2":72)}}0===i&&(console.log(n," None sph..."),r(-1))}))},et=function(e,t,n){return new Promise((function(a,r){try{for(var l=function(a){var r=o[a];"sph"===r.databaseText?r.inputValues=t:"cyl"===r.databaseText?r.inputValues=n:"thickness"===r.databaseText?$e(e,t,"lensThickness").then((function(e){e>-1&&(r.inputValues=e)})).catch((function(e){console.log(e)})):"diameter"===r.databaseText&&$e(e,t,"lensDiameter").then((function(e){e>-1&&(r.inputValues=e)})).catch((function(e){console.log(e)}))},i=qe({},e),o=[].concat(i.labInputs),s=0;s<o.length;s++)l(s);return i.labInputs=o,console.log(i),void a(i)}catch(c){console.log(c),r({})}}))};function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function nt(e,t,n,a,r,l,i){try{var o=e[l](i),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(a,r)}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){at(e,t,n[t])}))}return e}function lt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ot=r.createContext(),st=function(e){e.index;var t=lt(e,["index"]),n=it(W.Z.useForm(),1)[0];return(0,a.jsx)(W.Z,{form:n,component:!1,children:(0,a.jsx)(ot.Provider,{value:n,children:(0,a.jsx)("tr",rt({},t))})})},ct=function(e){e.title;var t=e.editable,n=e.children,l=e.dataIndex,i=e.record,o=e.handleSave,s=e.inputType,c=lt(e,["title","editable","children","dataIndex","record","handleSave","inputType"]),u=(0,r.useState)(!1),d=u[0],b=u[1],p=(0,r.useRef)(),f=(0,r.useContext)(ot);(0,r.useEffect)((function(){d&&p.current.focus()}),[d]);var h=function(){b(!d),f.setFieldsValue(at({},l,i[l]))},m=function(){var e,t=(e=pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.validateFields();case 3:t=e.sent,h(),o(rt({},i,t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),window.console.error("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function i(e){nt(l,a,r,i,o,"next",e)}function o(e){nt(l,a,r,i,o,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),v=n,g="inputNumber"===s?q.Z:ie.Z;return t&&(v=d?(0,a.jsx)(W.Z.Item,{style:{margin:0},name:l,children:(0,a.jsx)(g,{ref:p,onPressEnter:m,onBlur:m})}):(0,a.jsx)("div",{className:"editable-cell-value-wrap",style:{width:"100%",height:"100%",padding:5,margin:0,border:"0px solid red"},onClick:h,children:n})),(0,a.jsx)("td",rt({},c,{children:v}))},ut=function(e){var t=e.tableColumns,n=e.dataSource,r=e.setDataSource,l=e.tableSize,i={body:{row:st,cell:ct}},o=t.map((function(e,t){return e.editable?rt({},e,{onCell:function(t,a){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:function(e){return function(e,t){var a=[].concat(n),l=a[t];a.splice(t,1,rt({},l,e)),r(a)}(e,a)},inputType:e.inputType}}}):e}));return(0,a.jsx)("div",{children:(0,a.jsx)(Ie.Z,at({size:l,components:i,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:n,columns:o,pagination:!1,scroll:{x:"max-content",y:260},tableLayout:"fixed"},"size","small"))})};ut.defaultProps={tableColumns:[],dataSource:[],setDataSource:function(e){return console.log(e)},tableSize:"small"};var dt=ut;function bt(e,t,n,a,r,l,i){try{var o=e[l](i),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(a,r)}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(e){var t=e.labelObj,n=e.selectedPrinterIndex,l=(0,r.useState)(!1),i=l[0],o=l[1],s=(0,r.useState)([]),c=s[0],u=s[1],d=(0,r.useState)([]),b=d[0],p=d[1],f=(0,r.useState)(!1),h=f[0],m=f[1],v=(0,r.useState)(200),g=v[0],j=v[1],x=(0,r.useState)(0),y=x[0],O=x[1],S=(0,r.useState)(!0),w=S[0],C=S[1];(0,r.useEffect)((function(){L(),P()}),[g]);var I=function(){return k.bC.sphAndCylSigns[y]},N=function(){var e,t=(e=pe().mark((function e(t,a,r,l){var i;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l>0)){e.next=4;break}return i=I().cyl+(Number(r)/100).toFixed(2).toString(),e.next=4,et(t,a,i).then((function(e){ye(n,e,2,l)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function i(e){bt(l,a,r,i,o,"next",e)}function o(e){bt(l,a,r,i,o,"throw",e)}i(void 0)}))});return function(e,n,a,r){return t.apply(this,arguments)}}(),T=function(e,n){var a=function(a){var i=l[a];if(!isNaN(Number(i))){var o=Number(e[i]);if(o>0){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){pt(e,t,n[t])}))}return e}({},t);setTimeout((function(){N(s,r,Number(i),o)}),1e3*n),n+=1}}},r=e.sph?I().sph+e.sph:null;if(r){for(var l=Object.keys(e),i=0;i<l.length;i++)a(i);return n}},L=function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;return new Promise((function(t,n){var a=Ke(e),r=[],l=qe({},Xe);l.title="SPH-CYL",l.dataIndex="sph",l.fixed="left",r.push(l);var i=!0,o=!1,s=void 0;try{for(var c,u=a[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value,b=(100*Number(d)).toString(),p=qe({},Xe);p.title=d,p.dataIndex=b,p.width=80,p.editable=!0,r.push(p)}}catch(f){o=!0,s=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}r.length>0?t(r):(console.log("Error code..."),n([]))}))})(g).then((function(e){u(e)})).catch((function(e){console.log(e)}))},P=function(){C(!0),setTimeout((function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;return new Promise(function(){var t=He(pe().mark((function t(n,a){var r,l,i;return pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Ke(1200),l=[],i=0;case 3:if(!(i<r.length)){t.next=9;break}return t.next=6,Je(r,i,e).then((function(e){l.push(e)})).catch((function(e){console.log(e)}));case 6:i+=1,t.next=3;break;case 9:l.length>0?n(l):(console.log("Error code(dataSource)..."),a([]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})(g).then((function(e){p(e),C(!1)})).catch((function(e){console.log("~~~~~~......",e),C(!1)}))}),500)},V=function(e){j(e.target.value)},E=function(){return(0,a.jsxs)("div",{children:["\u6700\u5927\u6563\u5149:",(0,a.jsxs)(Qe.ZP.Group,{onChange:V,value:g,children:[(0,a.jsx)(Qe.ZP,{value:200,children:"200"}),(0,a.jsx)(Qe.ZP,{value:400,children:"400"}),(0,a.jsx)(Qe.ZP,{value:600,children:"600"})]})]})},Z=function(e){O(e.target.value)},F=function(){return(0,a.jsxs)("div",{children:["\u5149\u5ea6\u7b26\u53f7:",(0,a.jsxs)(Qe.ZP.Group,{onChange:Z,value:y,children:[(0,a.jsx)(Qe.ZP,{value:0,children:"-/-"}),(0,a.jsx)(Qe.ZP,{value:1,children:"-/+"}),(0,a.jsx)(Qe.ZP,{value:2,children:"+/-"}),(0,a.jsx)(Qe.ZP,{value:3,children:"+/+"})]})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.Z,{onClick:function(){o(!0),m(!0),setTimeout((function(){L(),P()}),500)},type:"primary",shape:"round",loading:h,children:"\u955c\u7247\u6279\u91cf\u6253\u5370"}),(0,a.jsxs)(M.Z,{title:"\u955c\u7247\u6279\u91cf\u6253\u5370",visible:i,footer:null,width:1e3,closable:!1,children:[(0,a.jsxs)(X.Z,{direction:"vertical",children:[(0,a.jsxs)(X.Z,{children:[(0,a.jsx)(J.Z,{onClick:function(){C(!0);for(var e=[].concat(b),t=0,n=0;n<e.length;n++){var a=e[n];t=T(a,t)}M.Z.success({content:"\u6279\u91cf\u6253\u5370\u5b8c\u6210!"}),C(!1)},type:"primary",shape:"round",loading:w,children:"\u6279\u91cf\u6253\u5370"}),(0,a.jsx)(J.Z,{onClick:function(){m(!1),o(!1)},shape:"round",children:"\u5173\u95ed"}),(0,a.jsx)(J.Z,{onClick:P,shape:"round",loading:w,children:"\u6e05\u9664\u6570\u91cf"})]}),(0,a.jsx)("hr",{}),(0,a.jsx)(E,{}),(0,a.jsx)(F,{})]}),(0,a.jsx)(Ae.Z,{size:"large",spinning:w,tip:"Loading...",children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",overflow:"auto",marginTop:"15px"},children:(0,a.jsx)(dt,{tableColumns:c,setDataSource:p,dataSource:b,tableSize:"small"})})})]})]})};function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){ht(e,t,n[t])}))}return e}var vt=function(e){return(.25*e).toFixed(2).toString()},gt=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thickness",a="thickness"===n?"1.2":72,r=0;r<e.length;r++){var l=e[r];if(l.sph===t)return l[n]?l[n]:a}return a},jt=function(e){var t=e.labelObj,n=e.setLabelObj,l=e.saveLabelHandle,i=e.setVisible,o=(0,r.useState)([]),s=o[0],c=o[1];(0,r.useEffect)((function(){var e=t.thicknessDiameter?t.thicknessDiameter:function(e){for(var t=[],n=e.thicknessDiameter?e.thicknessDiameter:[],a=0;a<41;a++){var r=vt(a),l={key:a.toString(),sph:r,thickness:gt(n,r,"thickness"),diameter:gt(n,r,"diameter")};t.push(l)}return t}(t);c(e)}),[t]);var u=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;console.log(r);for(var l=[].concat(s),i=l[r][a],o=r;o<s.length;o++)l.splice(o,1,mt({},l[o],ht({},a,i)));var c=mt({},t,{thicknessDiameter:l});n(c)},d=[{dataIndex:"sph",fixed:"left",title:"SPH",width:80,editable:!1},{dataIndex:"thickness",title:"\u4e2d\u5fc3\u539a\u5ea6",width:80,editable:!0,inputType:"input"},{dataIndex:"diameter",title:"\u76f4\u5f84",width:80,editable:!0,inputType:"input"},{dataIndex:"multipleUpdateThickness",title:"\u6279\u91cf\u64cd\u4f5c",width:100,editable:!1,render:function(e,t,n){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.Z,{type:"link",onClick:function(){return u(t,"thickness",n)},children:"\u66f4\u65b0\u4ee5\u4e0b\u539a\u5ea6"}),(0,a.jsx)(J.Z,{type:"link",onClick:function(){return u(t,"diameter",n)},children:"\u66f4\u65b0\u4ee5\u4e0b\u76f4\u5f84"})]})}}];return(0,a.jsx)("div",{children:(0,a.jsxs)(X.Z,{direction:"vertical",children:[(0,a.jsx)(dt,{tableColumns:d,dataSource:s,setDataSource:c}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("a",{className:"btn btn-primary btn-sm",onClick:function(){return function(){var e=mt({},t,{thicknessDiameter:s});console.log(e),n(e),l(e),i(0)}()},children:"\u786e\u5b9a"}),(0,a.jsx)("a",{className:"btn btn-sm",onClick:function(){return i(0)},children:"\u53d6\u6d88"})]})]})})};jt.defaultProps={labelObj:{},setlabelObj:function(e){return console.log(e)},saveLabelHandle:function(e){return console.log(e)},setVisible:function(e){return console.log(e)}};var xt=function(e){e.labelObj,e.setLabelObj,e.labelObjUpdateCount,e.setLabelObjUpdateCount;var t=e.editState,n=e.setEditState,l=(0,r.useState)(!1),i=(l[0],l[1],(0,r.useState)(!1));i[0],i[1];return(0,a.jsx)("div",{className:"flex flex-wrap content-start p-2 items-center",children:(0,a.jsx)("div",{"data-tip":"\u9009\u4e2d\u72b6\u6001, \u70b9\u51fb\u6807\u7b7e\u6587\u672c,\u4f1a\u5f39\u51fa\u6837\u5f0f\u4f4d\u7f6e\u7f16\u8f91\u7a97\u53e3!",className:"tooltip",children:(0,a.jsx)(V.aP,{labelText:"\u6587\u672c\u6837\u5f0f\u7f16\u8f91:",checked:t,setChecked:n,width:10})})})};function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){yt(e,t,n[t])}))}return e}var St=function(e){var t=e.isLensLabel,n=e.labelObj,l=e.setLabelObj,i=e.labelObjUpdateCount,o=e.setLabelObjUpdateCount,s=(e.visible,e.setVisible),c=(e.editState,e.setEditState,e.addInputObj),u=(0,r.useState)(!1),d=u[0],b=u[1],f=(0,r.useState)(!1),h=f[0],g=f[1];(0,r.useEffect)((function(){var e=n.labQRCode?Ot({},n.labQRCode):{},t=n.labBarcode?Ot({},n.labBarcode):{},a=!!e.showQrcode&&e.showQrcode,r=!!t.showCode&&t.showCode;b(a),g(r)}),[i]);var j=function(e){var t=Ot({},n);t.labQRCode||(t.labQRCode=p()),t.labQRCode.showQrcode=e,l(t),o(i+1)},x=function(e){var t=Ot({},n);t.labBarcode||(t.labBarcode=v());var a=m(t.labBarcode,{showCode:e});t.labBarcode=a,l(t),o(i+1)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{"data-tip":"\u7f16\u8f91\u6807\u7b7e\u5c3a\u5bf8",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-info btn-sm",onClick:function(){return s(11)},children:(0,a.jsxs)("svg",{t:"1629981089871",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3205",width:"24",height:"24",children:[(0,a.jsx)("path",{d:"M853.333333 426.666667a42.666667 42.666667 0 0 1-42.666666-42.666667V273.664L273.664 810.666667H384a42.666667 42.666667 0 1 1 0 85.333333H213.333333a85.333333 85.333333 0 0 1-85.333333-85.333333v-170.666667a42.666667 42.666667 0 1 1 85.333333 0v110.336L750.336 213.333333H640a42.666667 42.666667 0 1 1 0-85.333333h170.666667a85.333333 85.333333 0 0 1 85.333333 85.333333v170.666667a42.666667 42.666667 0 0 1-42.666667 42.666667z",fill:"#000000","p-id":"3206"}),(0,a.jsx)("path",{d:"M128 213.333333a85.333333 85.333333 0 0 1 85.333333-85.333333h170.666667a42.666667 42.666667 0 0 1 0 85.333333H213.333333v170.666667a42.666667 42.666667 0 0 1-85.333333 0V213.333333zM896 810.666667a85.333333 85.333333 0 0 1-85.333333 85.333333h-170.666667a42.666667 42.666667 0 1 1 0-85.333333h170.666667v-170.666667a42.666667 42.666667 0 1 1 85.333333 0v170.666667z",fill:"#9F9F9F","p-id":"3207"})]})})}),1===t?(0,a.jsx)("div",{"data-tip":"\u7f16\u8f91\u955c\u7247\u76f4\u5f84\u539a\u5ea6",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-info btn-sm",onClick:function(){return s(12)},children:(0,a.jsx)("svg",{t:"1629981537297",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7786",width:"24",height:"24",children:(0,a.jsx)("path",{d:"M512 85.333333A426.666667 426.666667 0 0 0 85.333333 512a426.666667 426.666667 0 0 0 426.666667 426.666667 426.666667 426.666667 0 0 0 426.666667-426.666667A426.666667 426.666667 0 0 0 512 85.333333m0 768a341.333333 341.333333 0 0 1-341.333333-341.333333 341.333333 341.333333 0 0 1 341.333333-341.333333 341.333333 341.333333 0 0 1 341.333333 341.333333 341.333333 341.333333 0 0 1-341.333333 341.333333m170.666667-213.333333v-85.333333H341.333333v85.333333l-128-128 128-128v85.333333h341.333334V384l128 128-128 128z","p-id":"7787"})})})}):null,d?(0,a.jsx)("div",{"data-tip":"\u9690\u85cf\u4e8c\u7ef4\u7801",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-outline btn-sm",onClick:function(){return j(!1)},children:(0,a.jsx)(E,{width:24,height:24})})}):(0,a.jsx)("div",{"data-tip":"\u663e\u793a\u4e8c\u7ef4\u7801",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-warning btn-sm",onClick:function(){return j(!0)},children:(0,a.jsx)(E,{width:24,height:24})})}),h?(0,a.jsx)("div",{"data-tip":"\u9690\u85cf\u6761\u5f62\u7801",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-outline btn-sm",onClick:function(){return x(!1)},children:(0,a.jsx)(Z,{width:24,height:24})})}):(0,a.jsx)("div",{"data-tip":"\u663e\u793a\u6761\u5f62\u7801",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-warning btn-sm",onClick:function(){return x(!0)},children:(0,a.jsx)(Z,{width:24,height:24})})}),(0,a.jsx)("div",{"data-tip":"\u589e\u52a0\u6587\u672c",className:"tooltip p-2",children:(0,a.jsx)("button",{className:"btn btn-circle btn-warning btn-sm",onClick:function(){return c(n,l,i,o)},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-6 h-6 stroke-current",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v12 M6 12h12"})})})})]})};function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){wt(e,t,n[t])}))}return e}var It=function(e,t,n,a){var r=Ct({},e);r.labInputs.push(T()),t(r),a(n+1)},Nt=function(e,t,n,a){var r=Ct({},e),l=r.labInputs[t]?r.labInputs[t]:null;return console.log(l,a),l?(Object.keys(l).indexOf(n)>-1?l[n]=a:l=I(l,wt({},n,a)),r.labInputs[t]=l):console.log("\u672a\u9009\u4e2dinput"),r},Tt=function(e,t){return new Promise((function(n,a){if(console.log(e),!e.labInputs||e.labInputs.length<1)return a("Label is None..."),void l.ZP.info("\u8bf7\u5148\u521b\u5efa\u6807\u7b7e...");var r=e.labid?e.labid:0;r>0?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(r,l){var i=Pe[2].api+"/"+e;(0,Te.H)(i,"put",{},ke(t,n,a)).then((function(e){r(e)})).catch((function(e){l(e)}))}))}(r,e,"",t).then((function(e){console.log(e),l.ZP.success("\u66f4\u65b0\u6807\u7b7e\u6210\u529f!"),n(e.label_object?e.label_object:e.label_obj)})).catch((function(e){console.log(e),l.ZP.error("\u66f4\u65b0\u6807\u7b7e\u5931\u8d25..."),a(e)})):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(a,r){var l=Pe[1].api;(0,Te.H)(l,"post",{},ke(e,t,n)).then((function(e){a(e)})).catch((function(e){r(e)}))}))}(e,"",t).then((function(e){console.log(e),l.ZP.success("\u6807\u7b7e\u4fdd\u5b58\u6210\u529f!"),n(e.label_object?e.label_object:e.label_obj)})).catch((function(e){console.log(e),l.ZP.error("\u6807\u7b7e\u4fdd\u5b58\u5931\u8d25..."),a(e)}))}))},Lt=function(e){var t=e.selectedPrinterIndex,n=(e.setSelectedPrinterIndex,(0,r.useState)(Ct({},g))),l=n[0],o=n[1],s=(0,r.useState)(0),c=s[0],u=s[1],d=(0,r.useState)(-1),b=d[0],p=d[1],f=(0,r.useState)(0),h=f[0],m=f[1],v=(0,r.useState)({top:40,left:20}),j=v[0],x=v[1],y=(0,r.useState)(!1),O=y[0],S=y[1],w=function(e){m(1),Tt(e,1).then((function(e){o(e),m(0)})).catch((function(e){console.log(e),m(0)}))};return(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 max-w-md",children:[(0,a.jsx)("h3",{children:"\u955c\u7247\u6807\u7b7e(Lens Label)"}),(0,a.jsx)(Ye,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,commonOrLensLabel:1,selectedPrinterIndex:t,saveOrUpdatelabel:function(){return w(l)}}),(0,a.jsx)("br",{}),(0,a.jsx)(ft,{labelObj:l,selectedPrinterIndex:t}),(0,a.jsx)("div",{className:"divider",children:"\u955c\u7247\u6807\u7b7e"}),(0,a.jsxs)("div",{className:"grid grid-rows-2 grid-cols-1 grid-flow-col gap-2",children:[(0,a.jsx)("div",{className:"w-full h-auto col-span-1",children:(0,a.jsx)(xt,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,editState:O,setEditState:S})}),(0,a.jsx)("div",{className:"w-full h-auto col-span-1",children:(0,a.jsx)(St,{isLensLabel:1,labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,visible:h,setVisible:m,editState:O,setEditState:S,addInputObj:It})})]}),(0,a.jsx)(A,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,visible:h,setVisible:m,visibleNumberQrcode:3,visibleNumberBarcode:4,updateSelectedInputObjIndex:function(e){p(e)},updateInputObjVal:function(e,t){var n=Nt(l,e,"inputValues",t);o(Ct({},n)),u(c+1)},editState:O,setVisibleInputEditDiv:m,setInputEditDivLocation:x})]}),(0,a.jsx)(i,{visible:h,setVisible:m,visibleNumber:1}),(0,a.jsx)(V.tU,{title:"\u6587\u672c\u6846\u7f16\u8f91",visible:h,setVisible:m,visibleNumber:2,divLocation:j,mbNumber:60,children:(0,a.jsx)(re,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,selectedInputObjIndex:b,updateInputObjVal:function(e,t){var n=Nt(l,b,e,t);o(Ct({},n)),u(c+1)},setEditVisible:m})}),(0,a.jsxs)(V.Dx,{title:"\u6807\u7b7e\u5c3a\u5bf8",visible:h,setVisible:m,visibleNumber:11,children:[(0,a.jsx)(Be,{labelObj:l,updateLabelObj:o}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("a",{className:"btn btn-primary btn-sm",onClick:function(){return m(0)},children:"\u786e\u5b9a"}),(0,a.jsx)("a",{className:"btn btn-sm",onClick:function(){return m(0)},children:"\u53d6\u6d88"})]})]}),(0,a.jsx)(V.Dx,{title:"\u955c\u7247\u4e2d\u5fc3\u539a\u5ea6\u76f4\u5f84",visible:h,setVisible:m,visibleNumber:12,children:(0,a.jsx)("div",{className:"max-w-full max-h-full overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gray-100 overflow-auto max-w-full max-h-full",children:(0,a.jsx)(jt,{labelObj:l,setLabelObj:o,saveLabelHandle:w,setVisible:m})})})})]})},Pt=function(e){var t=e.selectedPrinterIndex,n=(e.setSelectedPrinterIndex,(0,r.useState)(Ct({},g))),l=n[0],o=n[1],s=(0,r.useState)(0),c=s[0],u=s[1],d=(0,r.useState)(-1),b=d[0],p=d[1],f=(0,r.useState)(0),h=f[0],m=f[1],v=(0,r.useState)({top:40,left:20}),j=v[0],x=v[1],y=(0,r.useState)(!1),O=y[0],S=y[1];return(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 max-w-md",children:[(0,a.jsx)("h3",{children:"\u901a\u7528\u6807\u7b7e(Common Label)"}),(0,a.jsx)(Ye,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,commonOrLensLabel:0,selectedPrinterIndex:t,saveOrUpdatelabel:function(){m(1),Tt(l,0).then((function(e){console.log(e),o(e),m(0)})).catch((function(e){console.log(e),m(0)}))}}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsxs)("div",{className:"flex flex-wrap content-start p-2 items-center",children:[(0,a.jsx)(xt,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,editState:O,setEditState:S}),(0,a.jsx)("br",{}),(0,a.jsx)(St,{isLensLabel:0,labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,visible:h,setVisible:m,editState:O,setEditState:S,addInputObj:It})]}),(0,a.jsx)(A,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,visible:h,setVisible:m,visibleNumberQrcode:3,visibleNumberBarcode:4,updateSelectedInputObjIndex:function(e){p(e)},updateInputObjVal:function(e,t){var n=Nt(l,e,"inputValues",t);o(Ct({},n))},editState:O,setVisibleInputEditDiv:m,setInputEditDivLocation:x})]}),(0,a.jsx)(i,{visible:h,setVisible:m,visibleNumber:1}),(0,a.jsx)(V.tU,{title:"\u6587\u672c\u6846\u7f16\u8f91",visible:h,setVisible:m,visibleNumber:2,divLocation:j,mbNumber:60,children:(0,a.jsx)(re,{labelObj:l,setLabelObj:o,labelObjUpdateCount:c,setLabelObjUpdateCount:u,selectedInputObjIndex:b,updateInputObjVal:function(e,t){var n=Nt(l,b,e,t);console.log(n),o(Ct({},n)),u(c+1)},setEditVisible:m})}),(0,a.jsxs)(V.Dx,{title:"\u6807\u7b7e\u5c3a\u5bf8",visible:h,setVisible:m,visibleNumber:11,children:[(0,a.jsx)(Be,{labelObj:l,updateLabelObj:o}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("a",{className:"btn btn-primary btn-sm",onClick:function(){return m(0)},children:"\u786e\u5b9a"}),(0,a.jsx)("a",{className:"btn btn-sm",onClick:function(){return m(0)},children:"\u53d6\u6d88"})]})]})]})}},21:function(e,t,n){n.d(t,{C:function(){return x}});var a,r=n(5893),l=n(7294),i=n(8939),o=n(4268),s=n(6713),c=n(6790),u=n(1577),d=n(3160),b=n(6536),p=n(8969),f=function(){return new Promise((function(e,t){var n=!1;if("undefined"!==typeof document&&(n="complete"===document.readyState),n)if(a=(0,p.Z)()){for(var r=a.GET_PRINTER_COUNT(),l=[],i=0;i<r;i++)l.push(a.GET_PRINTER_NAME(i));e(l)}else b.ZP.error("\u8fde\u63a5\u6253\u5370\u670d\u52a1\u5668\u5931\u8d25..."),t("LODOP server connect error...");else b.ZP.error("\u8bf7\u7b49\u5f85\u9875\u9762\u52a0\u8f7d\u5b8c\u6210, \u518d\u5237\u65b0\u6253\u5370\u673a..."),t("LODOP server connecting...")}))},h=n(3727),m=n(402);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=i.Z.Option,x=function(e){var t=e.selectedPrinterIndex,n=e.setSelectedPrinterIndex,a=(0,l.useState)(["espon","fush","printer1"]),b=a[0],p=a[1],v=g(o.Z.useForm(),1)[0],x=(0,l.useState)(""),y=x[0],O=x[1],S=function(){f().then((function(e){p(e),(0,h.xN)(m.mJ.latestSelectedPrinterKey).then((function(a){var r=0,l=Number(a);console.log("Cookie saved printer index: ".concat(l)),!isNaN(l)&&l>0&&l<e.length&&(r=l),t>0&&t<e.length&&(r=t),e.length>0&&(O(e[r]),n(r))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};return(0,l.useEffect)((function(){S()}),[t]),(0,r.jsx)(o.Z,{layout:"inline",form:v,children:(0,r.jsx)(o.Z.Item,{label:"\u6253\u5370\u673a(Printer)",children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(i.Z,{className:"rounded min-w-min",onChange:function(e){console.log(e);var t=b.indexOf(e);O(e),(0,h.pp)(m.mJ.latestSelectedPrinterKey,t.toString(),180),n(t)},value:y,children:b.map((function(e){return(0,r.jsx)(j,{value:e,children:e},e)}))}),(0,r.jsx)(c.Z,{title:"\u5237\u65b0\u6253\u5370\u673a",children:(0,r.jsx)(u.Z,{type:"primary",shape:"circle",icon:(0,r.jsx)(d.Z,{}),onClick:S})})]})})})};x.defaultProps={selectedPrinterIndex:0,setSelectedPrinterIndex:function(e){return console.log(e)}}},8969:function(e,t,n){var a,r,l;function i(){try{var e=navigator.userAgent;if(e.match(/Windows\sPhone/i))return!0;if(e.match(/iPhone|iPod|iPad/i))return!0;if(e.match(/Android/i))return!0;if(e.match(/Edge\D?\d+/i))return!0;var t=e.match(/Trident\D?\d+/i),n=e.match(/MSIE\D?\d+/i),a=e.match(/OPR\D?\d+/i),r=e.match(/Firefox\D?\d+/i),l=e.match(/x64/i);if(!t&&!n&&l)return!0;if(r){if((r=r[0].match(/\d+/))[0]>=41||l)return!0}else if(a){if((a=a[0].match(/\d+/))[0]>=32)return!0}else if(!t&&!n){var i=e.match(/Chrome\D?\d+/i);if(i&&(i=i[0].match(/\d+/))[0]>=41)return!0}return!0}catch(o){return!0}}var o=n(402).jk.clodopUrl;console.log(o),i()&&function(){if("loading"!==l&&"complete"!==l&&(l="loading","undefined"!==typeof document)){var e=window.location.protocol,t=(document.body||document.getElementsByTagName("script")[0]||document.documentElement,document.createElement("script")),n=document.createElement("script");if("https:"===e)t.src="https://localhost.lodop.net:8443/CLodopfuncs.js",n.src="https://localhost.lodop.net:8444/CLodopfuncs.js";else{try{t.src="http://".concat(o,":8000/CLodopfuncs.js?priority=1")}catch(a){console.error(a)}n.src="http://".concat(o,":18000/CLodopfuncs.js")}t.onload=n.onload=function(){l="complete"},t.onerror=n.onerror=function(e){l="complete"},t.type=n.type="text/javascript";try{document.body.appendChild(t),document.body.appendChild(n)}catch(a){console.log(a)}r=!!(t.src+n.src).match(/\/\/localhost|\/\/127.0.0.1/i)}}(),t.Z=function(e,t){var n,o=document.createElement("div");o.setAttribute("id","lodop-error-tips");var s="Error";try{var c=navigator.userAgent,u=!!c.match(/MSIE/i)||!!c.match(/Trident/i);if(i()){try{n=window.getCLodop()}catch(b){}if(!n&&"complete"!==l)return void("loading"===l?alert("\u7f51\u9875\u8fd8\u6ca1\u4e0b\u8f7d\u5b8c\u6bd5\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4e0b\u518d\u64cd\u4f5c."):alert("\u6ca1\u6709\u52a0\u8f7dCLodop\u7684\u4e3bjs\uff0c\u8bf7\u5148\u8c03\u7528loadCLodop\u8fc7\u7a0b."));if(!n)return s=document.createTextNode("<br /><font color='#FF00FF'>Web\u6253\u5370\u670d\u52a1CLodop\u672a\u5b89\u88c5\u542f\u52a8\uff0c\u70b9\u51fb\u8fd9\u91cc<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>\u4e0b\u8f7d\u6267\u884c\u5b89\u88c5</a>"+(r?"<br />\uff08\u82e5\u6b64\u524d\u5df2\u5b89\u88c5\u8fc7\uff0c\u53ef<a href='CLodop.protocol:setup' target='_self'>\u70b9\u8fd9\u91cc\u76f4\u63a5\u518d\u6b21\u542f\u52a8</a>\uff09":"")+"\uff0c\u6210\u529f\u540e\u8bf7\u5237\u65b0\u672c\u9875\u9762\u3002</font>"),o.appendChild(s),void document.body.appendChild(o);console.log(window.CLODOP.CVERSION),window.CLODOP.CVERSION<"3.0.0.1"&&(s=document.createTextNode("<br /><font color='#FF00FF'>Web\u6253\u5370\u670d\u52a1CLodop\u9700\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u5237\u65b0\u9875\u9762\u3002</font>"),o.appendChild(s),document.body.appendChild(o)),t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e)}else{var d=u&&!!c.match(/x64/i);if(e||t?n=u?e:t:a?n=a:((n=document.createElement("object")).setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),u?n.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):n.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(n),a=n),!n||!n.VERSION)return c.indexOf("Chrome")>=0&&(document.body.innerHTML="<br /><br /><font color='#FF00FF'>(\u5982\u679c\u6b64\u524d\u6b63\u5e38\uff0c\u4ec5\u56e0\u6d4f\u89c8\u5668\u5347\u7ea7\u6216\u91cd\u5b89\u88c5\u800c\u51fa\u95ee\u9898\uff0c\u9700\u91cd\u65b0\u6267\u884c\u4ee5\u4e0a\u5b89\u88c5\uff09</font>"+document.body.innerHTML),c.indexOf("Firefox")>=0&&(document.body.innerHTML="<br /><br /><font color='#FF00FF'>\uff08\u6ce8\u610f\uff1a\u5982\u66fe\u5b89\u88c5\u8fc7Lodop\u65e7\u7248\u9644\u4ef6npActiveXPLugin,\u8bf7\u5728\u3010\u5de5\u5177\u3011->\u3010\u9644\u52a0\u7ec4\u4ef6\u3011->\u3010\u6269\u5c55\u3011\u4e2d\u5148\u5378\u5b83\uff09</font>"+document.body.innerHTML),document.body.innerHTML=(d?"<br /><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u672a\u5b89\u88c5!\u70b9\u51fb\u8fd9\u91cc<a href='install_lodop64.exe' target='_self'>\u6267\u884c\u5b89\u88c5</a>,\u5b89\u88c5\u540e\u8bf7\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u8fdb\u5165\u3002</font>":"<br /><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u672a\u5b89\u88c5!\u70b9\u51fb\u8fd9\u91cc<a href='install_lodop32.exe' target='_self'>\u6267\u884c\u5b89\u88c5</a>,\u5b89\u88c5\u540e\u8bf7\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u8fdb\u5165\u3002</font>")+document.body.innerHTML,n}return n.VERSION||i()||(document.body.innerHTML=(d?"<br /><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u9700\u8981\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href='install_lodop64.exe' target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u91cd\u65b0\u8fdb\u5165\u3002</font>":"<br /><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u9700\u8981\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href='install_lodop32.exe' target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u91cd\u65b0\u8fdb\u5165\u3002</font>")+document.body.innerHTML),n.SET_LICENSES("","1C29B4FDBA7B971E8EC94D5A5A6D72919F9","",""),n}catch(b){alert("getLodop\u51fa\u9519:"+b)}}}}]);